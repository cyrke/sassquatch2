	</main>
	</section>

<!-- lunr.js search index -->
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="js/lunr.min.js"></script>
<script type="text/javascript">
$(function() {
	//
	// Disable links by default
	//
	$('a').click(function(e) {
		if ( $(this).hasClass('followLink') ) return;
		e.preventDefault();
	});

	//
	// collapsible example
	//
	var $c = $('#cContainer'),
		CLASS_COL_CLOSE = 'collapsible--close';
	if ( $c.length > 0 ) {
		$('#cTrigger').on('click', function() {
			if ( $c.hasClass(CLASS_COL_CLOSE) ) {
				$c.removeClass(CLASS_COL_CLOSE);
			} else {
				$c.addClass(CLASS_COL_CLOSE);
			}
		});
	}


	// TODO: modal code





	//
	// lunr search index
	//
	var index = lunr(function() {
		this.field('title', {boost: 10});
		this.field('breadcrumb');
		this.ref('path');
	});

	<% @pages.each do |file_name, page| %>
		<% if not page[:blocks].empty? %>
			<% page[:blocks].each do |block| %>
				<% file_path = block[:categories][0].to_s.gsub(' ', '_').downcase + '.html' %>
				<% file_id = "#"+block[:name].to_s %>

				<%= "index.add({" %>
					<%= "\"title\": \""+block[:title].to_s+"\"," %>
					<%= "\"breadcrumb\": \""+block[:categories][0].to_s+" > "+block[:title]+"\"," %>
					<%= "\"path\": \""+file_path+file_id+"\"" %>
				<%= "});" %>

			<% end %>
		<% end %>
	<% end %>

	// TEMP: debug search index
	window.HOTDOG = index;
});
</script>

</body>
</html>
